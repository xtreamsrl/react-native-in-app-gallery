import React, {useCallback, useMemo} from 'react';
import ImagePicker, {ImagePickerOptions, ImagePickerResponse} from 'react-native-image-picker';
import {Image, TouchableOpacity} from 'react-native';
import {convertToImageFile} from './utils';
import {ImageFile} from './typings';
import {galleryButtonStyles} from "./styles";

type Props = {
  onImagePicked: (image: ImageFile) => void;
  imagePickerOptions: ImagePickerOptions;
};

const FloatFullGalleryButton: React.FC<Props> = ({
  onImagePicked,
  imagePickerOptions,
}) => {
  const callback = useCallback(
    (res: ImagePickerResponse) => {
      onImagePicked(convertToImageFile(res, imagePickerOptions));
    },
    [onImagePicked, imagePickerOptions],
  );

  const handleOnPress = useCallback(() => {
    ImagePicker.launchImageLibrary(imagePickerOptions, callback);
  }, [imagePickerOptions, callback]);

  const source = useMemo(() => {
    return {uri: 'data:image/png;base64,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jjHGl808vksAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADR2aHSDJV44xbpsdopF7zw6wxf5yjFGzQzRx2uwAW+zyMcbPzw7RxD1mHnwdCsApsSmxHU6fHQD2gXLVhEsAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADSkAANCQAgAADa0qAJ866SnYVp+ceGxzzH6ZOUsz1xDbZcccryoAHzgJQejhponHNsfsl5mzNHMNsV12zPGqAnDzSQjC9vtYVf3NxOObY/bLtFlarqGPzTo+W2XHHK8qANeehCBsv/8z+fh/muTw5AxsvsNZzNJMs9cS22HH3r6qALwlrjtx4v7bzINX1a1Jrp6Zga1w9XKWZpq6ltgKn8xib7+bHQWgqv42yW+fjERstStmB0jy+tkB2HjrMEPrsJbYbL+93NvvZre3Af7UAYdhu725qtbhUtIvJfnw7BBsrA9nMUNTLdfSm2fnYKOt3NNXFoCquirJmw4yDVvrcJIXzA6RJFX10SQvnZ2DjfXS5QytgxfEPS0cnzct9/QdjvRBQM9PMvMubjbTK6vq/84OcRc/n+T3Zodg4/xeFrOzFpZr6pWzc7Bx/iaLvXylUVW7PnOM8fgsbkDxiYHsxW8leUJV3Tk7yF2NMc5K8q4kD5idhY1wU5Kvqaq1eivpGOOULM7MfuPs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'}
  }, []);

  return (
    <TouchableOpacity
      onPress={handleOnPress}
      style={galleryButtonStyles.touchable}>
      <Image style={galleryButtonStyles.image} source={source} />
    </TouchableOpacity>
  );
};

export default FloatFullGalleryButton;
